<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="layer">
  <h1>#JavaScript30 Drum Example</h1>
    <div class="drums">
      <div class="drumkit">
        <div class="drum" data-key="65"> 
          <div class="drum-note">A</div>
          <div class="drum-sound">Clap</div>
        </div>
        <div class="drum" data-key="83"> 
          <div class="drum-note">S</div>
          <div class="drum-sound">HiHat</div>
        </div>
        <div class="drum" data-key="68">
          <div class="drum-note">D</div>
          <div class="drum-sound">Kick</div>
        </div>
        <div class="drum" data-key="70"> 
          <div class="drum-note">F</div>
          <div class="drum-sound">OpenHat</div>
        </div>
        <div class="drum" data-key="71"> 
          <div class="drum-note">G</div>
          <div class="drum-sound">Boom</div>
        </div>
        <div class="drum" data-key="72"> 
          <div class="drum-note">H</div>
          <div class="drum-sound">Ride</div>
        </div>
        <div class="drum" data-key="74"> 
          <div class="drum-note">J</div>
          <div class="drum-sound">Snare</div>
        </div>
        <div class="drum" data-key="75"> 
          <div class="drum-note">K</div>
          <div class="drum-sound">Tom</div>
        </div>
        <div class="drum" data-key="76"> 
          <div class="drum-note">L</div>
          <div class="drum-sound">Tink</div>
        </div>
      </div>
    </div>
  </div>

  <audio data-key="65" src="sounds/clap.wav"></audio>
  <audio data-key="83" src="sounds/hihat.wav"></audio>
  <audio data-key="68" src="sounds/kick.wav"></audio>
  <audio data-key="70" src="sounds/openhat.wav"></audio>
  <audio data-key="71" src="sounds/boom.wav"></audio>
  <audio data-key="72" src="sounds/ride.wav"></audio>
  <audio data-key="74" src="sounds/snare.wav"></audio>
  <audio data-key="75" src="sounds/tom.wav"></audio>
  <audio data-key="76" src="sounds/tink.wav"></audio>

<script>

  // keydown listener
  window.addEventListener('keydown', drummer);

  function removeTransition(e) {
    // if propertyName is not a transform end function
    if (e.propertyName !== 'transform') return;
    // add remove class of playing on the elem that called it
    this.classList.remove('playing');
  }

  function drummer(e) {

    // sets up constants
    const audio = document.querySelector(`audio[data-key="${e.keyCode}"`);
    const drum = document.querySelector(`div[data-key="${e.keyCode}"`);

    // if not an audio tag end function
    if (!audio) return;
    // reset play time to 0
    audio.currentTime = 0;
    // play corresponding audio tag
    audio.play();
    // add playing class for css effect
    drum.classList.add('playing');
  }

  //drum loop and transitionend key

  const drums = document.querySelectorAll('.drum');
  drums.forEach(drum => drum.addEventListener('transitionend', removeTransition));
      
</script>


</body>
</html>
